FROM node:22.4.1-alpine

WORKDIR /app

ARG BACKEND_URL
ARG S3_URL
ARG NEXT_PUBLIC_RECAPTCHA_SITE_KEY
ARG NEXT_PUBLIC_RECAPTCHA_SECRET_KEY

ENV NODE_ENV=development
ENV PORT=4000
ENV HOSTNAME=0.0.0.0
ENV BACKEND_URL=$BACKEND_URL
ENV S3_URL=$S3_URL
ENV NEXT_PUBLIC_RECAPTCHA_SITE_KEY=$NEXT_PUBLIC_RECAPTCHA_SITE_KEY
ENV NEXT_PUBLIC_RECAPTCHA_SECRET_KEY=$NEXT_PUBLIC_RECAPTCHA_SECRET_KEY

COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 4000

CMD ["npm", "run", "dev"]